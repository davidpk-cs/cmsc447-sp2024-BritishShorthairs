<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Grid Drawing</title>
<style>
canvas {
  border: 1px solid black;
}
#toolbox {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background-color: #f4f4f4;
  padding: 10px 0;
  box-shadow: 0 -2px 5px rgba(0,0,0,0.2);
  display: flex;
  justify-content: left;
}

#toolbox button {
  margin: 0 5px;
}
</style>
</head>
<body>
<canvas id="canvas" width="500" height="500"></canvas>
<div id="toolbox">
  <button onclick='change_button("1")'>Button 1</button>
  <button onclick='change_button("2")'>Button 2</button>
  <button onclick='change_button("3")'>Button 3</button>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth * .99;
canvas.height = window.innerHeight * .89;

box1 = {x: 2, y:2}
box2 = {x: 10, y: 2}
box3 = {x: 15, y: 20}
curr_box = box1

const pixel_size = 20; // Size of the grid cell

const drawBoard = () => {
  for (let x = 0; x <= canvas.width + pixel_size; x += pixel_size) {
    for (let y = 0; y <= canvas.height + pixel_size; y += pixel_size) {
      ctx.strokeStyle = "black";
      ctx.strokeRect(x, y, pixel_size, pixel_size);
    }
  }
};

const drawRect = (x, y) => {
  ctx.fillStyle = "blue";
  ctx.fillRect(x * pixel_size, y * pixel_size, 
               pixel_size * curr_box.x, pixel_size * curr_box.y);
};

const round_to_grid = (coord) => {
  return Math.floor(coord / pixel_size);
};

canvas.addEventListener('click', (event) => {
  const rect = canvas.getBoundingClientRect();
  const x = event.clientX - rect.left;
  const y = event.clientY - rect.top;

  const gridX = round_to_grid(x);
  const gridY = round_to_grid(y);

  drawRect(gridX, gridY);
});

drawBoard();

function change_button(x) {
  console.log(x)
  if (x === "1") {
    curr_box = box1
  } else if (x === "2") {
    curr_box = box2
  } else if (x === "3") {
    curr_box = box3
  }
}
</script>
</body>
</html>
